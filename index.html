<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rock Paper Scissors</title>
</head>
<body>
    
</body>
<script>

    //The function below makes the machine generate a random number and tranforms this number into a string. 0 becomes Rock, 1 becomes Paper and 2 becomes Scissors
    function computerPlay(){
        let play = Math.floor(Math.random() * 3);
        if (play === 0){
            return 'Rock'
        } else if (play === 1){
            return 'Paper'
        } else{
            return 'Scissors'
        }
    }

    //The function below put the guesses of the two challengers to collide and returns a number accordingly to the result fo the round. 0 for tie, 1 for victory of the player, 2 for the victory of the machine, 3 for blank space, 4 for misspelling.
    function playRound(playerSelection, computerSelection){
        if (playerSelection === 'Rock'){
            if (computerSelection === 'Rock'){
                return 0
            } else if (computerSelection === 'Scissors'){
                return 1
            } else if (computerSelection === 'Paper'){
                return 2
            }
        }

        if (playerSelection === 'Paper'){
            if (computerSelection === 'Paper'){
                return 0
            } else if (computerSelection === 'Rock'){
                return 1
            } else if (computerSelection === 'Scissors'){
                return 2
            }
        }

        if (playerSelection === 'Scissors'){
            if (computerSelection === 'Scissors'){
                return 0
            } else if (computerSelection === 'Paper'){
                return 1
            } else if (computerSelection === 'Rock'){
                return 2
            }
        }

        if (playerSelection == '' || ' '){
            return 3
        }

        if (playerSelection !== 'Rock' || 'Paper' || 'Scissors' || '' || ' '){
            return 4
        }
    }

    function game(){
        alert('Let\'s play Rock Paper Scissors against the MACHINE!')
        let name = prompt('First of all, put your name for us to know who to thank (or blame) later.')
        if (name === null || ' '){
            name = 'Mysterious Person';
        }
        alert(`Ok, ${name}. Let's begin. Good luck!`)
        let playerCount = 0;
        let computerCount = 0;
        for (let i = 0; i < 5; i++){
            const choice = prompt('Choose your weapon wisely: Rock, Paper or Scissors?')
            const playerSelection = choice.charAt(0).toUpperCase() + choice.slice(1).toLowerCase();
            const computerSelection = computerPlay();
            let result = playRound(playerSelection, computerSelection);
            if (result === 0){
                alert(`That's a Tie! [${name}] ${playerSelection} -VS- ${computerSelection} [The MACHINE]`)
                console.log(`That's a Tie! [${name}] ${playerSelection} -VS- ${computerSelection} [The MACHINE]`)
            } else if (result === 1){
                alert(`You WIN! [${name}] **${playerSelection}** -VS- ${computerSelection} [The MACHINE]`)
                console.log(`You WIN! [${name}] **${playerSelection}** -VS- ${computerSelection} [The MACHINE]`)
                playerCount += 1;
            } else if (result === 2){
                alert(`You LOSE! [${name}] ${playerSelection} -VS- **${computerSelection}** [The MACHINE]`)
                console.log(`You LOSE! [${name}] ${playerSelection} -VS- **${computerSelection}** [The MACHINE]`)
                computerCount += 1;
            } else if (result === 3){
                alert(`Didn't chose a weapon? Got beat up. Point to the MACHINE.`)
                computerCount += 1;
            } else{
                alert(`Misspell! You wrote **${playerSelection}**. The MACHINE doesn't forgive dumbness. Point to the MACHINE.`)
                computerCount += 1;
            }

        alert(`${name} ${playerCount} x ${computerCount} the MACHINE`)

        }

        console.log('You made', playerCount, 'point(s).');
        console.log('The MACHINE made', computerCount, 'point(s).');

        alert(`You made ${playerCount} point(s). The MACHINE made ${computerCount} point(s)`)

        if (playerCount > computerCount){
            alert(`${name}, you WON the whole thing! Congratulations! Now let's have a beer (or juice)!`)
            console.log(`${name}, you WON the whole thing! Congratulations! Now let's have a beer (or juice)!`);
        } else if (playerCount < computerCount){
            alert(`${name}, you LOST the whole thing! Better luck next time.`)
            console.log(`${name}, you LOST the whole thing! Better luck next time.`)
        } else{
            alert(`${name}, you and the Machine have TIED. Now it\'s time for punches. Get your gloves!`)
            console.log(`${name}, you and the Machine have TIED. Now it\'s time for punches. Get your gloves!`)
        }
    }
    
    game();
</script>
</html>